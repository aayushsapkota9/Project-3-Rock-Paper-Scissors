<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><Rock-Paper-Scissors></Rock-Paper-Scissors></title>
</head>

<body>
    <h3>Rock Paper Scissors</h3>
    <div>
        <!-- <div>Total: <span id="totalGames">0</span></div> -->
        <div>Computer:<span id="compScore">0</span></div>
        <div>User:<span id="userScore">0</span></div>
        <div>You:<span id="score"></span></div>

    </div>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>

    <script>
        function getComputerChoice() {

            let a = Math.floor(Math.random() * 3) + 1;
            if (a == 1) {
                return "rock";
            }
            else if (a == 2) {
                return "paper";
            }
            else {
                return "scissors";
            }
        }
        function playRound(computerSelection, playerSelection) {
            if (computerSelection == playerSelection) { return ("Draw"); }
            else if (computerSelection == "rock" && playerSelection == "paper") { return "Win"; }
            else if (computerSelection == "paper" && playerSelection == "rock") { return "Loose"; }
            else if (computerSelection == "scissors" && playerSelection == "rock") { return "Win"; }
            else if (computerSelection == "rock" && playerSelection == "scissors") { return "Loose"; }
            else if (computerSelection == "paper" && playerSelection == "scissors") { return "Win"; }
            else if (computerSelection == "scissors" && playerSelection == "paper") { return "Loose"; }
            else { return "Draw"; }

        }
        function fetchToPlayRound(choice, gameCount) {
            let playerSelection = choice;
            const computerSelection = getComputerChoice();
            check = playRound(computerSelection, playerSelection);
            console.log(check);
            console.log("computer choice is")
            console.log(computerSelection);
            console.log("player choice is")
            console.log(playerSelection);
            if (check == "Win") { userWinCount++; } else { compWinCount++; }

            const userScore = document.querySelector('#userScore');
            const compScore = document.querySelector('#compScore');
            const score = document.querySelector('#score');
            score.textContent = check;
            // const totalGames=document.querySelector('#totalGames');
            // totalGames.innerHTML=gameCount;
            userScore.innerHTML = userWinCount;
            compScore.innerHTML = compWinCount;
            if (userWinCount == 5) {
                setTimeout(() => {
                    if(userWinCount>compWinCount)
                    {
                        alert("You won")
                    }
                    else if(userWinCount<compWinCount
                    ){
                        alert("You Lost")
                    }
                    else{
                        alert("It's a draw")
                    }
                    location.reload();
                }, 2000);
            }
        }




        function eventGame(gameCount) {


            const rockBtn = document.querySelector('#rock');
            const paperBtn = document.querySelector('#paper');
            const scissorsBtn = document.querySelector('#scissors');
            rockBtn.addEventListener('click', () => {
                if (userWinCount < noOfRounds) { fetchToPlayRound('rock'); gameCount++; }
            });
            paperBtn.addEventListener('click', () => {
                if (userWinCount < noOfRounds) { fetchToPlayRound('paper'); gameCount++; }
            });
            scissorsBtn.addEventListener('click', () => {
                if (userWinCount < noOfRounds) { fetchToPlayRound('scissors'); gameCount++; }
            });

        }

        let userWinCount = 0;
        let compWinCount = 0;
        let gameCount = 0;
        noOfRounds = 5;
        eventGame(gameCount);







    </script>
</body>

</html>